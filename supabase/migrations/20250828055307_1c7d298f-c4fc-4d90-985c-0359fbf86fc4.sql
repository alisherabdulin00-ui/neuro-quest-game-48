-- Clean up database and create new course structure

-- Drop the lesson_content table (no longer needed with block-based system)
DROP TABLE IF EXISTS public.lesson_content;

-- Clear all existing data
DELETE FROM public.lesson_blocks;
DELETE FROM public.lessons;
DELETE FROM public.chapters;
DELETE FROM public.courses;
DELETE FROM public.user_progress;

-- Create new course: "Основы искусственного интеллекта"
INSERT INTO public.courses (id, title, description, difficulty, duration_hours, lessons_count, icon, color, bg_color, order_index) VALUES
('550e8400-e29b-41d4-a716-446655440000', 'Основы искусственного интеллекта', 'Изучите основы ИИ, машинного обучения и нейронных сетей', 'Начинающий', 8, 3, 'Brain', '#3b82f6', '#dbeafe', 1);

-- Create chapter for the course
INSERT INTO public.chapters (id, course_id, title, description, order_index) VALUES
('660e8400-e29b-41d4-a716-446655440000', '550e8400-e29b-41d4-a716-446655440000', 'Основы ИИ', 'Введение в искусственный интеллект и машинное обучение', 1);

-- Create 3 lessons
INSERT INTO public.lessons (id, chapter_id, title, description, duration_minutes, lesson_type, order_index) VALUES
('770e8400-e29b-41d4-a716-446655440001', '660e8400-e29b-41d4-a716-446655440000', 'Введение в ИИ', 'Изучите основы искусственного интеллекта и его применения', 45, 'theory', 1),
('770e8400-e29b-41d4-a716-446655440002', '660e8400-e29b-41d4-a716-446655440000', 'Машинное обучение', 'Погрузитесь в мир машинного обучения и его алгоритмов', 60, 'practice', 2),
('770e8400-e29b-41d4-a716-446655440003', '660e8400-e29b-41d4-a716-446655440000', 'Нейронные сети', 'Изучите основы нейронных сетей и глубокого обучения', 75, 'theory', 3);

-- Lesson 1: "Введение в ИИ" blocks
INSERT INTO public.lesson_blocks (lesson_id, block_type, order_index, title, content) VALUES
('770e8400-e29b-41d4-a716-446655440001', 'theory', 1, 'Что такое ИИ?', '{
  "title": "Что такое искусственный интеллект?",
  "content": "Искусственный интеллект (ИИ) — это область компьютерных наук, направленная на создание машин, способных выполнять задачи, которые обычно требуют человеческого интеллекта.",
  "points": [
    "Решение сложных проблем",
    "Распознавание образов и речи",
    "Обработка естественного языка",
    "Принятие решений в неопределенности"
  ],
  "layout": "text-only"
}'),
('770e8400-e29b-41d4-a716-446655440001', 'theory', 2, 'История ИИ', '{
  "title": "История развития ИИ",
  "content": "Искусственный интеллект как научная дисциплина зародился в 1950-х годах. С тех пор он прошел через несколько волн развития, от ранних экспертных систем до современного глубокого обучения.",
  "points": [
    "1950: Тест Тьюринга",
    "1956: Дартмутская конференция",
    "1980-90: Экспертные системы",
    "2010+: Эра больших данных и нейросетей"
  ],
  "image": "/src/assets/ai-brain-concept.jpg",
  "imageAlt": "Концепция искусственного мозга",
  "layout": "text-image"
}'),
('770e8400-e29b-41d4-a716-446655440001', 'practice', 3, 'Проверка знаний', '{
  "question": "В каком году была проведена Дартмутская конференция, которая считается началом ИИ как науки?",
  "options": ["1950", "1956", "1960", "1965"],
  "correct": 1,
  "explanation": "Дартмутская конференция 1956 года считается моментом рождения ИИ как самостоятельной научной дисциплины."
}'),
('770e8400-e29b-41d4-a716-446655440001', 'theory', 4, 'ИИ vs Человеческий интеллект', '{
  "title": "ИИ против человеческого интеллекта",
  "content": "Хотя ИИ может превосходить людей в определенных задачах, человеческий интеллект остается уникальным по своей гибкости и креативности.",
  "points": [
    "ИИ: быстрое вычисление, точность, выносливость",
    "Человек: креативность, эмоции, интуиция",
    "ИИ специализирован, человек универсален",
    "Будущее: сотрудничество, а не замещение"
  ],
  "layout": "text-only"
}');

-- Lesson 2: "Машинное обучение" blocks
INSERT INTO public.lesson_blocks (lesson_id, block_type, order_index, title, content) VALUES
('770e8400-e29b-41d4-a716-446655440002', 'theory', 1, 'Что такое ML?', '{
  "title": "Основы машинного обучения",
  "content": "Машинное обучение — это подмножество ИИ, которое позволяет системам автоматически обучаться и улучшаться на основе опыта без явного программирования.",
  "points": [
    "Автоматическое обучение из данных",
    "Выявление закономерностей",
    "Предсказание и классификация",
    "Адаптация к новым данным"
  ],
  "layout": "text-only"
}'),
('770e8400-e29b-41d4-a716-446655440002', 'theory', 2, 'Типы ML', '{
  "title": "Типы машинного обучения",
  "content": "Существует три основных типа машинного обучения, каждый из которых решает разные классы задач.",
  "points": [
    "Обучение с учителем (Supervised Learning)",
    "Обучение без учителя (Unsupervised Learning)",
    "Обучение с подкреплением (Reinforcement Learning)",
    "Полуконтролируемое обучение (Semi-supervised)"
  ],
  "image": "/src/assets/ai-ml-diagram.jpg",
  "imageAlt": "Диаграмма типов машинного обучения",
  "layout": "text-image"
}'),
('770e8400-e29b-41d4-a716-446655440002', 'practice', 3, 'Классификация задач', '{
  "question": "Какой тип машинного обучения используется для задач, где у нас есть входные данные и известные правильные ответы?",
  "options": [
    "Обучение без учителя",
    "Обучение с учителем", 
    "Обучение с подкреплением",
    "Глубокое обучение"
  ],
  "correct": 1,
  "explanation": "Обучение с учителем (Supervised Learning) использует размеченные данные, где для каждого входа известен правильный выход."
}'),
('770e8400-e29b-41d4-a716-446655440002', 'video', 4, 'ML в действии', '{
  "title": "Машинное обучение в действии",
  "description": "Посмотрите, как работают алгоритмы машинного обучения на практике",
  "videoUrl": "https://www.youtube.com/embed/aircAruvnKk"
}'),
('770e8400-e29b-41d4-a716-446655440002', 'practice', 5, 'Финальный тест', '{
  "question": "Что является ключевым преимуществом машинного обучения перед традиционным программированием?",
  "options": [
    "Более быстрое выполнение",
    "Автоматическое обучение из данных",
    "Меньше потребление памяти",
    "Простота программирования"
  ],
  "correct": 1,
  "explanation": "Главное преимущество ML — способность автоматически обучаться и адаптироваться на основе данных без необходимости явного программирования каждого случая."
}');

-- Lesson 3: "Нейронные сети" blocks
INSERT INTO public.lesson_blocks (lesson_id, block_type, order_index, title, content) VALUES
('770e8400-e29b-41d4-a716-446655440003', 'theory', 1, 'Введение в нейросети', '{
  "title": "Что такое нейронные сети?",
  "content": "Нейронные сети — это вычислительные модели, вдохновленные биологическими нейронными сетями. Они состоят из взаимосвязанных узлов (нейронов), которые обрабатывают информацию.",
  "points": [
    "Имитация работы человеческого мозга",
    "Сеть взаимосвязанных нейронов",
    "Обучение через корректировку весов",
    "Способность к обобщению"
  ],
  "layout": "text-only"
}'),
('770e8400-e29b-41d4-a716-446655440003', 'theory', 2, 'Как работают нейроны', '{
  "title": "Принцип работы искусственного нейрона",
  "content": "Искусственный нейрон получает входные сигналы, применяет к ним веса, суммирует результат и пропускает через функцию активации для получения выходного сигнала.",
  "points": [
    "Входные сигналы (inputs)",
    "Веса соединений (weights)",
    "Функция суммирования",
    "Функция активации"
  ],
  "image": "/src/assets/ai-brain-hero.jpg",
  "imageAlt": "Структура нейронной сети",
  "layout": "image-text"
}'),
('770e8400-e29b-41d4-a716-446655440003', 'practice', 3, 'Структура нейросети', '{
  "question": "Что определяет, насколько сильно входной сигнал влияет на выход нейрона?",
  "options": [
    "Функция активации",
    "Вес соединения",
    "Количество входов",
    "Порог активации"
  ],
  "correct": 1,
  "explanation": "Вес соединения определяет силу влияния каждого входного сигнала на итоговый выход нейрона."
}'),
('770e8400-e29b-41d4-a716-446655440003', 'theory', 4, 'Глубокое обучение', '{
  "title": "Основы глубокого обучения",
  "content": "Глубокое обучение использует нейронные сети с множеством скрытых слоев для решения сложных задач, таких как распознавание изображений и обработка естественного языка.",
  "points": [
    "Многослойные нейронные сети",
    "Автоматическое извлечение признаков",
    "Обратное распространение ошибки",
    "Применение в компьютерном зрении, NLP"
  ],
  "image": "/src/assets/ai-modules.jpg",
  "imageAlt": "Модули глубокого обучения",
  "layout": "text-image"
}'),
('770e8400-e29b-41d4-a716-446655440003', 'practice', 5, 'Итоговая оценка', '{
  "question": "Какая основная особенность отличает глубокое обучение от традиционных методов машинного обучения?",
  "options": [
    "Использование больших данных",
    "Автоматическое извлечение признаков",
    "Более быстрое обучение",
    "Меньше параметров"
  ],
  "correct": 1,
  "explanation": "Главная особенность глубокого обучения — способность автоматически извлекать иерархические признаки из сырых данных без ручной разработки признаков."
}');