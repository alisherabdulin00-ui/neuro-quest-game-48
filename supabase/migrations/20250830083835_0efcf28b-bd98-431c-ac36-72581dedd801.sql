-- First add the chatbot block type to the enum constraint
ALTER TABLE public.lesson_blocks DROP CONSTRAINT IF EXISTS lesson_blocks_block_type_check;
ALTER TABLE public.lesson_blocks ADD CONSTRAINT lesson_blocks_block_type_check 
  CHECK (block_type IN ('theory', 'practice', 'video', 'chatbot'));

-- Create a new lesson about ChatGPT  
INSERT INTO public.lessons (
  id,
  title,
  description,
  chapter_id,
  order_index,
  duration_minutes,
  points,
  lesson_type
) VALUES (
  '770e8400-e29b-41d4-a716-446655440000',
  '–ü—Ä–∞–∫—Ç–∏–∫–∞ —Å ChatGPT',
  '–ò–∑—É—á–∏—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ ChatGPT —á–µ—Ä–µ–∑ —Ç–µ–æ—Ä–∏—é –∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ',
  '660e8400-e29b-41d4-a716-446655440000',
  1,
  30,
  50,
  'reading'
);

-- Create lesson blocks for the ChatGPT lesson
INSERT INTO public.lesson_blocks (
  id,
  lesson_id,
  block_type,
  title,
  order_index,
  content
) VALUES 
(
  '880e8400-e29b-41d4-a716-446655440001',
  '770e8400-e29b-41d4-a716-446655440000',
  'theory',
  '–ß—Ç–æ —Ç–∞–∫–æ–µ ChatGPT?',
  1,
  '{
    "content": "ChatGPT ‚Äî —ç—Ç–æ —á–∞—Ç-–±–æ—Ç —Å –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–º –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–æ–º, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π OpenAI. –û–Ω –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ –º–æ–¥–µ–ª–∏ GPT (Generative Pre-trained Transformer) –∏ —Å–ø–æ—Å–æ–±–µ–Ω –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –¥–∏–∞–ª–æ–≥–∏ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏.\n\n## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:\n\n- **–û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã** ‚Äî ChatGPT –º–æ–∂–µ—Ç –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ —à–∏—Ä–æ–∫–∏–π —Å–ø–µ–∫—Ç—Ä –≤–æ–ø—Ä–æ—Å–æ–≤\n- **–ü–æ–º–æ—â—å –≤ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏** ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤, –ø–∏—Å–µ–º, —Å—Ç–∞—Ç–µ–π\n- **–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –ø–æ–º–æ—â—å –≤ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ –∏ –æ—Ç–ª–∞–¥–∫–µ –∫–æ–¥–∞\n- **–¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ** ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–¥–µ–π, —Å—Ç–∏—Ö–æ–≤, –∏—Å—Ç–æ—Ä–∏–π\n- **–û–±—É—á–µ–Ω–∏–µ** ‚Äî –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ —Å–ª–æ–∂–Ω—ã—Ö –∫–æ–Ω—Ü–µ–ø—Ü–∏–π –ø—Ä–æ—Å—Ç—ã–º —è–∑—ã–∫–æ–º\n\n## –í–∞–∂–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–±–æ—Ç—ã:\n\n1. **–ö–æ–Ω—Ç–µ–∫—Å—Ç** ‚Äî ChatGPT –ø–æ–º–Ω–∏—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–π –±–µ—Å–µ–¥—ã\n2. **–ü—Ä–æ–º–ø—Ç—ã** ‚Äî –∫–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–∞—á–µ—Å—Ç–≤–∞ –≤–æ–ø—Ä–æ—Å–∞\n3. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è** ‚Äî –º–æ–¥–µ–ª—å –∏–º–µ–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ –∑–Ω–∞–Ω–∏—è–º –∏ –º–æ–∂–µ—Ç –¥–æ–ø—É—Å–∫–∞—Ç—å –æ—à–∏–±–∫–∏",
    "estimatedReadTime": 3
  }'
),
(
  '880e8400-e29b-41d4-a716-446655440002',
  '770e8400-e29b-41d4-a716-446655440000',
  'practice',
  '–°–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤',
  2,
  '{
    "exercises": [
      {
        "question": "–ö–∞–∫–æ–π –ø—Ä–æ–º–ø—Ç –±—É–¥–µ—Ç –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ—Ü–µ–ø—Ç–∞?",
        "options": [
          "–î–∞–π —Ä–µ—Ü–µ–ø—Ç",
          "–î–∞–π —Ä–µ—Ü–µ–ø—Ç –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–≤—Ç—Ä–∞–∫–∞ –¥–ª—è –æ–¥–Ω–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞ –Ω–∞ 10 –º–∏–Ω—É—Ç —Å —è–π—Ü–∞–º–∏",
          "–ß—Ç–æ –ø—Ä–∏–≥–æ—Ç–æ–≤–∏—Ç—å?",
          "–†–µ—Ü–µ–ø—Ç —Å —è–π—Ü–∞–º–∏"
        ],
        "correctAnswer": 1,
        "explanation": "–î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ–º–ø—Ç —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏ (–≤—Ä–µ–º—è, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ä—Ü–∏–π, –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç) –¥–∞—ë—Ç –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–π –∏ –ø–æ–ª–µ–∑–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç."
      },
      {
        "question": "–ß—Ç–æ –ù–ï —Å—Ç–æ–∏—Ç –¥–µ–ª–∞—Ç—å –ø—Ä–∏ –æ–±—â–µ–Ω–∏–∏ —Å ChatGPT?",
        "options": [
          "–ó–∞–¥–∞–≤–∞—Ç—å —É—Ç–æ—á–Ω—è—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã",
          "–ü—Ä–æ—Å–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏",
          "–°–ª–µ–ø–æ –¥–æ–≤–µ—Ä—è—Ç—å –≤—Å–µ–º –æ—Ç–≤–µ—Ç–∞–º –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏",
          "–§–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å —á—ë—Ç–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã"
        ],
        "correctAnswer": 2,
        "explanation": "ChatGPT –º–æ–∂–µ—Ç –¥–æ–ø—É—Å–∫–∞—Ç—å –æ—à–∏–±–∫–∏, –ø–æ—ç—Ç–æ–º—É –≤–∞–∂–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤—Å–µ–≥–¥–∞ —Å–ª–µ–¥—É–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∏–∑ –Ω–∞–¥—ë–∂–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤."
      }
    ]
  }'
),
(
  '880e8400-e29b-41d4-a716-446655440003',
  '770e8400-e29b-41d4-a716-446655440000',
  'chatbot',
  '–ü—Ä–∞–∫—Ç–∏–∫–∞ —Å ChatGPT',
  3,
  '{
    "title": "–ü—Ä–∞–∫—Ç–∏–∫–∞ —Å ChatGPT",
    "description": "–ü–æ–ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ—Å—å –≤ –æ–±—â–µ–Ω–∏–∏ —Å ChatGPT –∏ –∏–∑—É—á–∏—Ç–µ –µ–≥–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏",
    "model": "gpt-4o",
    "systemPrompt": "–¢—ã —ç–∫—Å–ø–µ—Ä—Ç –ø–æ ChatGPT –∏ –ò–ò-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º. –¢—ã –ø–æ–º–æ–≥–∞–µ—à—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –∏–∑—É—á–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ ChatGPT —á–µ—Ä–µ–∑ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã. –û—Ç–≤–µ—á–∞–π –∫—Ä–∞—Ç–∫–æ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ, –ø—Ä–∏–≤–æ–¥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã. –ü–æ–¥—Å—Ç—Ä–∞–∏–≤–∞–π—Å—è –ø–æ–¥ —É—Ä–æ–≤–µ–Ω—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –∑–∞–¥–∞–≤–∞–π —É—Ç–æ—á–Ω—è—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ. –§–æ–∫—É—Å–∏—Ä—É–π—Å—è –Ω–∞ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–º –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏ ChatGPT –≤ —Ä–∞–±–æ—Ç–µ –∏ —É—á—ë–±–µ.",
    "allowedCapabilities": ["text"],
    "initialMessage": "–ü—Ä–∏–≤–µ—Ç! –Ø –ø–æ–º–æ–≥—É —Ç–µ–±–µ –∏–∑—É—á–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ ChatGPT. –ó–¥–µ—Å—å —Ç—ã –º–æ–∂–µ—à—å –∑–∞–¥–∞—Ç—å –ª—é–±—ã–µ –≤–æ–ø—Ä–æ—Å—ã –æ —Ä–∞–±–æ—Ç–µ —Å –ò–ò –∏–ª–∏ –ø–æ–ø—Ä–æ—Å–∏—Ç—å –ø–æ–º–æ—â—å –≤ —Å–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–∏ –ø—Ä–æ–º–ø—Ç–æ–≤. –ß—Ç–æ —Ç–µ–±—è –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç?",
    "suggestedQuestions": [
      "–ö–∞–∫ —Å–æ—Å—Ç–∞–≤–∏—Ç—å —Ö–æ—Ä–æ—à–∏–π –ø—Ä–æ–º–ø—Ç –¥–ª—è ChatGPT?",
      "–ü–æ–∫–∞–∂–∏ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è ChatGPT –≤ —Ä–∞–±–æ—Ç–µ",
      "–ö–∞–∫–∏–µ –µ—Å—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —É ChatGPT?",
      "–ü–æ–º–æ–≥–∏ –Ω–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ–º–ø—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ç–µ–∫—Å—Ç–∞"
    ],
    "minInteractions": 3
  }'
),
(
  '880e8400-e29b-41d4-a716-446655440004',
  '770e8400-e29b-41d4-a716-446655440000',
  'video',
  '–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏ —Ä–∞–±–æ—Ç—ã —Å ChatGPT',
  4,
  '{
    "videoUrl": "https://www.youtube.com/embed/JTxsNm9IdYU",
    "title": "–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏ —Ä–∞–±–æ—Ç—ã —Å ChatGPT",
    "description": "–ò–∑—É—á–∏—Ç–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –º–µ—Ç–æ–¥—ã —Ä–∞–±–æ—Ç—ã —Å ChatGPT",
    "duration": "8:45",
    "transcript": "–í —ç—Ç–æ–º –≤–∏–¥–µ–æ –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏ —Ä–∞–±–æ—Ç—ã —Å ChatGPT, –≤–∫–ª—é—á–∞—è –º–µ—Ç–æ–¥—ã –ø—Ä–æ–º–ø—Ç-–∏–Ω–∂–µ–Ω–µ—Ä–∏–∏ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤."
  }'
),
(
  '880e8400-e29b-41d4-a716-446655440005',
  '770e8400-e29b-41d4-a716-446655440000',
  'theory',
  '–≠—Ç–∏–∫–∞ –∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ò–ò',
  5,
  '{
    "content": "–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å ChatGPT –∏ –¥—Ä—É–≥–∏–º–∏ –ò–ò-—Å–∏—Å—Ç–µ–º–∞–º–∏ –≤–∞–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å –æ–± —ç—Ç–∏—á–µ—Å–∫–∏—Ö –∞—Å–ø–µ–∫—Ç–∞—Ö –∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏.\n\n## –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:\n\n### üîí –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å\n- –ù–µ –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ –ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –ø–∞—Ä–æ–ª–∏ –∏–ª–∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é\n- –ü–æ–º–Ω–∏—Ç–µ, —á—Ç–æ –≤–∞—à–∏ –∑–∞–ø—Ä–æ—Å—ã –º–æ–≥—É—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è\n- –ë—É–¥—å—Ç–µ –æ—Å—Ç–æ—Ä–æ–∂–Ω—ã —Å –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π\n\n### ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–∫—Ç–æ–≤\n- –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –≤–∞–∂–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤\n- –ò–ò –º–æ–∂–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∞–≤–¥–æ–ø–æ–¥–æ–±–Ω—ã–µ, –Ω–æ –Ω–µ—Ç–æ—á–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã\n- –û—Å–æ–±–µ–Ω–Ω–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö, —é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö –∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤\n\n### üéØ –ß–µ—Å—Ç–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ\n- –£–∫–∞–∑—ã–≤–∞–π—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ò–ò –≤ –∞–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∏—Ö –∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞—Ö\n- –ù–µ –≤—ã–¥–∞–≤–∞–π—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –∑–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞\n- –†–∞–∑–≤–∏–≤–∞–π—Ç–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –º—ã—à–ª–µ–Ω–∏–µ, –Ω–µ –ø–æ–ª–∞–≥–∞–π—Ç–µ—Å—å —Å–ª–µ–ø–æ –Ω–∞ –ò–ò\n\n### üåç –°–æ—Ü–∏–∞–ª—å–Ω–∞—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å\n- –ò–∑–±–µ–≥–∞–π—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω–æ–≥–æ –∏–ª–∏ –¥–∏—Å–∫—Ä–∏–º–∏–Ω–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞\n- –ü–æ–º–Ω–∏—Ç–µ –æ –≤–ª–∏—è–Ω–∏–∏ –ò–ò –Ω–∞ –æ–±—â–µ—Å—Ç–≤–æ –∏ —Ä—ã–Ω–æ–∫ —Ç—Ä—É–¥–∞\n- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –¥–ª—è —Å–æ–∑–∏–¥–∞–Ω–∏—è, –∞ –Ω–µ —Ä–∞–∑—Ä—É—à–µ–Ω–∏—è",
    "estimatedReadTime": 4
  }'
);